# 쿠키(Cookie)와 세션(Session)

## HTTP 특징
- **비연결지향(Connectionless)**:  
  클라이언트가 서버에 요청하고 응답을 받은 후 연결이 끊어지는 특징. 요청마다 새로운 연결이 이루어짐.
  
- **무상태(Stateless)**:  
  HTTP는 상태를 저장하지 않으며, 이전 요청 정보를 기억하지 않음. 각 요청은 독립적.

- **쿠키와 세션의 필요성**:  
  - HTTP의 무상태 특성으로 인해 이전 요청을 기억하지 못하므로, 매번 사용자가 누구인지 인증해야 하는 번거로움 발생.  
  - 쿠키와 세션은 이러한 불편함을 해결하고, 요청 간 상태를 유지하기 위해 사용됨.  
  - 예) 로그인 상태 유지, 장바구니 기능 등.

---

## 쿠키(Cookie)
- **정의**:  
  서버가 클라이언트(웹 브라우저)에 전달하는 작은 데이터 조각. Key-Value 형태로 저장되며, 이후 동일한 서버에 요청 시 함께 전달됨.

- **특징**:  
  1. 유저의 로컬에 데이터 저장.  
  2. 유저의 행동(검색 기록, 장바구니 등)을 기억하여 맞춤형 경험 제공.  
  3. 브라우저가 요청마다 쿠키를 서버에 전달.

- **주요 활용 사례**:  
  - **장바구니 기능**: 어떤 물건이 담겼는지 기억.  
  - **최근 검색 기록**: 사용자의 검색 데이터를 기반으로 맞춤형 광고 제공.  
  - **오늘 다시 보지 않기**: 특정 설정을 기억하여 동일한 팝업 표시 방지.  

- **개인정보 이슈**:  
  쿠키를 활용한 맞춤형 광고로 인해 개인정보 추적 및 저장 문제가 대두.  
  - 광고 시장에서 쿠키는 유저의 행동을 추적하여 맞춤형 광고 제공.  
  - **구글 크롬**: 2024년부터 쿠키 관련 제재를 시행, 광고 시장 변화 가능성.

- **한 줄 요약**:  
  서버가 클라이언트에 쿠키를 전달 → 이후 모든 요청에 쿠키를 포함하여 상태 기억.

---

## 세션(Session)
- **정의**:  
  클라이언트와 서버 간의 상태(State)를 유지하기 위한 방법.  
  세션은 서버 측에서 정보를 저장하고 관리하며, 클라이언트는 쿠키에 저장된 세션 ID를 통해 서버와 통신.

- **쿠키와 세션의 차이점**:  
  - 쿠키는 클라이언트 측에 저장되는 데이터로 유저가 조작 가능.  
  - 세션은 서버에서 상태를 관리하며, 클라이언트는 세션 ID만 보유.  

- **세션 작동 방식**:  
  1. 클라이언트가 서버에 접속하면, 서버가 고유한 세션 ID를 발급.  
  2. 세션 ID를 클라이언트 쿠키에 저장.  
  3. 이후 클라이언트는 세션 ID를 포함하여 요청.  
  4. 서버는 해당 세션 ID를 확인하고 상태를 기억하여 알맞은 응답 처리.  
  5. 민감 정보는 세션 ID를 통해 서버에서만 관리(보안성 향상).

- **한 줄 요약**:  
  쿠키는 데이터를 클라이언트 측에 저장, 세션은 서버에서 관리하며 클라이언트는 세션 ID를 통해 인증.

---

## 쿠키의 수명
- **세션 쿠키(Session Cookie)**:  
  브라우저 종료 시 자동 삭제.
  
- **지속 쿠키(Persistent Cookie)**:  
  디스크에 저장되며, 브라우저 종료나 컴퓨터 재시작 후에도 유지.  
  - `Max-Age` 속성을 지정하여 쿠키의 만료 시간 설정 가능.

---

## Django에서의 Session과 Auth
- Django는 세션과 인증(Auth) 과정을 자동으로 처리.  
- 서버에서 세션 ID 발급, 클라이언트는 쿠키를 통해 세션 ID 전달.  
- 로그인 상태 유지 등 인증 기능을 위한 세션 관리 코드 작성 불필요.  
- Django 내부에서 모든 처리를 자동으로 수행.
