# TIL: Django - PostgreSQL 연결 문제 및 React ESLint 경고 해결

## 1. Django - PostgreSQL 연결 문제

### 에러 메시지
```
drf | django.db.utils.OperationalError: connection to server at "localhost", port 5432 failed: Connection refused
```

### 원인
- PostgreSQL 서버가 실행 중이 아니거나, Django가 PostgreSQL 서버에 접근할 수 없는 상태.
- PostgreSQL 설정이 잘못되어 있거나 Docker 네트워크 문제일 가능성.

### 해결 방법
#### 1. PostgreSQL 서버 상태 확인
1. Docker 컨테이너 내부에서 PostgreSQL이 실행 중인지 확인:
   ```bash
   docker ps
   ```
2. PostgreSQL 컨테이너가 실행 중이지 않다면 다음 명령어로 시작:
   ```bash
   docker-compose up db
   ```

#### 2. Django `settings.py` 확인
`DATABASES` 설정에서 `HOST`와 `PORT`를 올바르게 설정:
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'your_database_name',
        'USER': 'your_database_user',
        'PASSWORD': 'your_password',
        'HOST': 'db',  # Docker Compose 서비스 이름 사용
        'PORT': '5432',
    }
}
```

#### 3. Docker Compose 네트워크 확인
1. PostgreSQL 컨테이너와 `drf` 컨테이너가 같은 네트워크에 있는지 확인:
   ```bash
   docker network ls
   docker network inspect your_network_name
   ```
2. 네트워크가 다르면, `docker-compose.yml`에서 동일한 네트워크에 연결되도록 수정.

#### 4. PostgreSQL 서버 로그 확인
PostgreSQL 컨테이너 로그를 확인하여 문제를 디버깅:
```bash
docker logs db
```

---

## 2. React - 'loading' 및 'useEffect' 관련 경고

### 에러 메시지
```
frontend-1 | Line 20:17:  'loading' is assigned a value but never used  no-unused-vars
frontend-1 | Line 1:27:  'useEffect' is defined but never used         no-unused-vars
```

### 원인
- `loading`이나 `useEffect`를 정의했지만 사용하지 않았기 때문에 발생하는 ESLint 경고.

### 해결 방법
#### 1. 사용하지 않는 변수를 제거
사용하지 않는 변수를 삭제하거나, 필요한 경우 코드를 수정:
```javascript
// Profile.js
// 'loading' 변수를 사용하는 코드 추가
if (loading) {
    return <p>Loading...</p>;
}
```
```javascript
// Riddle.js
// 'useEffect'를 사용하는 로직 추가
useEffect(() => {
    // Fetch data or perform side effects
}, []);
```

#### 2. ESLint 설정에서 경고 비활성화
사용하지 않는 변수를 허용하려면 `.eslintrc.js` 파일에 규칙을 추가:
```javascript
rules: {
    'no-unused-vars': 'off',
}
```
그러나 실제로 필요한 코드만 유지하는 것이 더 좋은 방법.

---

## 3. 통합 디버깅

### `docker-compose.yml` 예시
Docker Compose 설정 문제를 확인:
```yaml
services:
  drf:
    build: .
    depends_on:
      - db
    environment:
      - DATABASE_HOST=db
      - DATABASE_PORT=5432
  db:
    image: postgres:latest
    environment:
      POSTGRES_USER: your_user
      POSTGRES_PASSWORD: your_password
      POSTGRES_DB: your_database
    ports:
      - "5432:5432"
```

### 명령어 확인
1. 컨테이너 상태 확인:
   ```bash
   docker-compose ps
   ```
2. 네트워크 통신 확인:
   ```bash
   docker exec -it drf ping db
   ```

---

이후에도 문제가 있으면 상세 로그를 확인하고 추가적으로 디버깅해야 함.

